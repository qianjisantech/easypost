// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package query

import (
	"context"
	"database/sql"

	"gorm.io/gorm"

	"gorm.io/gen"

	"gorm.io/plugin/dbresolver"
)

var (
	Q                           = new(Query)
	AmAPI                       *amAPI
	AmDoc                       *amDoc
	AmFolder                    *amFolder
	AmTab                       *amTab
	GsTrafficManager            *gsTrafficManager
	GsTrafficManagerHeader      *gsTrafficManagerHeader
	GsTrafficManagerRequestBody *gsTrafficManagerRequestBody
	GsTrafficManagerResponse    *gsTrafficManagerResponse
	SysOrganizeTeam             *sysOrganizeTeam
	SysProject                  *sysProject
	SysTeam                     *sysTeam
	SysTeamMember               *sysTeamMember
	SysUser                     *sysUser
)

func SetDefault(db *gorm.DB, opts ...gen.DOOption) {
	*Q = *Use(db, opts...)
	AmAPI = &Q.AmAPI
	AmDoc = &Q.AmDoc
	AmFolder = &Q.AmFolder
	AmTab = &Q.AmTab
	GsTrafficManager = &Q.GsTrafficManager
	GsTrafficManagerHeader = &Q.GsTrafficManagerHeader
	GsTrafficManagerRequestBody = &Q.GsTrafficManagerRequestBody
	GsTrafficManagerResponse = &Q.GsTrafficManagerResponse
	SysOrganizeTeam = &Q.SysOrganizeTeam
	SysProject = &Q.SysProject
	SysTeam = &Q.SysTeam
	SysTeamMember = &Q.SysTeamMember
	SysUser = &Q.SysUser
}

func Use(db *gorm.DB, opts ...gen.DOOption) *Query {
	return &Query{
		db:                          db,
		AmAPI:                       newAmAPI(db, opts...),
		AmDoc:                       newAmDoc(db, opts...),
		AmFolder:                    newAmFolder(db, opts...),
		AmTab:                       newAmTab(db, opts...),
		GsTrafficManager:            newGsTrafficManager(db, opts...),
		GsTrafficManagerHeader:      newGsTrafficManagerHeader(db, opts...),
		GsTrafficManagerRequestBody: newGsTrafficManagerRequestBody(db, opts...),
		GsTrafficManagerResponse:    newGsTrafficManagerResponse(db, opts...),
		SysOrganizeTeam:             newSysOrganizeTeam(db, opts...),
		SysProject:                  newSysProject(db, opts...),
		SysTeam:                     newSysTeam(db, opts...),
		SysTeamMember:               newSysTeamMember(db, opts...),
		SysUser:                     newSysUser(db, opts...),
	}
}

type Query struct {
	db *gorm.DB

	AmAPI                       amAPI
	AmDoc                       amDoc
	AmFolder                    amFolder
	AmTab                       amTab
	GsTrafficManager            gsTrafficManager
	GsTrafficManagerHeader      gsTrafficManagerHeader
	GsTrafficManagerRequestBody gsTrafficManagerRequestBody
	GsTrafficManagerResponse    gsTrafficManagerResponse
	SysOrganizeTeam             sysOrganizeTeam
	SysProject                  sysProject
	SysTeam                     sysTeam
	SysTeamMember               sysTeamMember
	SysUser                     sysUser
}

func (q *Query) Available() bool { return q.db != nil }

func (q *Query) clone(db *gorm.DB) *Query {
	return &Query{
		db:                          db,
		AmAPI:                       q.AmAPI.clone(db),
		AmDoc:                       q.AmDoc.clone(db),
		AmFolder:                    q.AmFolder.clone(db),
		AmTab:                       q.AmTab.clone(db),
		GsTrafficManager:            q.GsTrafficManager.clone(db),
		GsTrafficManagerHeader:      q.GsTrafficManagerHeader.clone(db),
		GsTrafficManagerRequestBody: q.GsTrafficManagerRequestBody.clone(db),
		GsTrafficManagerResponse:    q.GsTrafficManagerResponse.clone(db),
		SysOrganizeTeam:             q.SysOrganizeTeam.clone(db),
		SysProject:                  q.SysProject.clone(db),
		SysTeam:                     q.SysTeam.clone(db),
		SysTeamMember:               q.SysTeamMember.clone(db),
		SysUser:                     q.SysUser.clone(db),
	}
}

func (q *Query) ReadDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Read))
}

func (q *Query) WriteDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Write))
}

func (q *Query) ReplaceDB(db *gorm.DB) *Query {
	return &Query{
		db:                          db,
		AmAPI:                       q.AmAPI.replaceDB(db),
		AmDoc:                       q.AmDoc.replaceDB(db),
		AmFolder:                    q.AmFolder.replaceDB(db),
		AmTab:                       q.AmTab.replaceDB(db),
		GsTrafficManager:            q.GsTrafficManager.replaceDB(db),
		GsTrafficManagerHeader:      q.GsTrafficManagerHeader.replaceDB(db),
		GsTrafficManagerRequestBody: q.GsTrafficManagerRequestBody.replaceDB(db),
		GsTrafficManagerResponse:    q.GsTrafficManagerResponse.replaceDB(db),
		SysOrganizeTeam:             q.SysOrganizeTeam.replaceDB(db),
		SysProject:                  q.SysProject.replaceDB(db),
		SysTeam:                     q.SysTeam.replaceDB(db),
		SysTeamMember:               q.SysTeamMember.replaceDB(db),
		SysUser:                     q.SysUser.replaceDB(db),
	}
}

type queryCtx struct {
	AmAPI                       IAmAPIDo
	AmDoc                       IAmDocDo
	AmFolder                    IAmFolderDo
	AmTab                       IAmTabDo
	GsTrafficManager            IGsTrafficManagerDo
	GsTrafficManagerHeader      IGsTrafficManagerHeaderDo
	GsTrafficManagerRequestBody IGsTrafficManagerRequestBodyDo
	GsTrafficManagerResponse    IGsTrafficManagerResponseDo
	SysOrganizeTeam             ISysOrganizeTeamDo
	SysProject                  ISysProjectDo
	SysTeam                     ISysTeamDo
	SysTeamMember               ISysTeamMemberDo
	SysUser                     ISysUserDo
}

func (q *Query) WithContext(ctx context.Context) *queryCtx {
	return &queryCtx{
		AmAPI:                       q.AmAPI.WithContext(ctx),
		AmDoc:                       q.AmDoc.WithContext(ctx),
		AmFolder:                    q.AmFolder.WithContext(ctx),
		AmTab:                       q.AmTab.WithContext(ctx),
		GsTrafficManager:            q.GsTrafficManager.WithContext(ctx),
		GsTrafficManagerHeader:      q.GsTrafficManagerHeader.WithContext(ctx),
		GsTrafficManagerRequestBody: q.GsTrafficManagerRequestBody.WithContext(ctx),
		GsTrafficManagerResponse:    q.GsTrafficManagerResponse.WithContext(ctx),
		SysOrganizeTeam:             q.SysOrganizeTeam.WithContext(ctx),
		SysProject:                  q.SysProject.WithContext(ctx),
		SysTeam:                     q.SysTeam.WithContext(ctx),
		SysTeamMember:               q.SysTeamMember.WithContext(ctx),
		SysUser:                     q.SysUser.WithContext(ctx),
	}
}

func (q *Query) Transaction(fc func(tx *Query) error, opts ...*sql.TxOptions) error {
	return q.db.Transaction(func(tx *gorm.DB) error { return fc(q.clone(tx)) }, opts...)
}

func (q *Query) Begin(opts ...*sql.TxOptions) *QueryTx {
	tx := q.db.Begin(opts...)
	return &QueryTx{Query: q.clone(tx), Error: tx.Error}
}

type QueryTx struct {
	*Query
	Error error
}

func (q *QueryTx) Commit() error {
	return q.db.Commit().Error
}

func (q *QueryTx) Rollback() error {
	return q.db.Rollback().Error
}

func (q *QueryTx) SavePoint(name string) error {
	return q.db.SavePoint(name).Error
}

func (q *QueryTx) RollbackTo(name string) error {
	return q.db.RollbackTo(name).Error
}
